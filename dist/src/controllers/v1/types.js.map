{"version":3,"file":"types.js","sourceRoot":"","sources":["../../../../src/controllers/v1/types.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response } from \"express\";\nimport { z } from \"zod\";\nimport { isUrlBlocked } from \"../../scraper/WebScraper/utils/blocklist\";\nimport { protocolIncluded, checkUrl } from \"../../lib/validateUrl\";\nimport { PlanType } from \"../../types\";\nimport { countries } from \"../../lib/validate-country\";\nimport { ExtractorOptions, PageOptions, ScrapeActionContent, Document as V0Document } from \"../../lib/entities\";\nimport { InternalOptions } from \"../../scraper/scrapeURL\";\n\nexport type Format =\n  | \"markdown\"\n  | \"html\"\n  | \"rawHtml\"\n  | \"links\"\n  | \"screenshot\"\n  | \"screenshot@fullPage\"\n  | \"extract\";\n\nexport const url = z.preprocess(\n  (x) => {\n    if (!protocolIncluded(x as string)) {\n      return `http://${x}`;\n    }\n    return x;\n  },\n  z\n    .string()\n    .url()\n    .regex(/^https?:\\/\\//, \"URL uses unsupported protocol\")\n    .refine(\n      (x) => /\\.[a-z]{2,}([\\/?#]|$)/i.test(x),\n      \"URL must have a valid top-level domain or be a valid path\"\n    )\n    .refine(\n      (x) => {\n        try {\n          checkUrl(x as string)\n          return true;\n        } catch (_) {\n          return false;\n        }\n      },\n      \"Invalid URL\"\n    )\n    .refine(\n      (x) => !isUrlBlocked(x as string),\n      \"Firecrawl currently does not support social media scraping due to policy restrictions. We're actively working on building support for it.\"\n    )\n);\n\nconst strictMessage = \"Unrecognized key in body -- please review the v1 API documentation for request body changes\";\n\nexport const extractOptions = z.object({\n  mode: z.enum([\"llm\"]).default(\"llm\"),\n  schema: z.any().optional(),\n  systemPrompt: z.string().default(\"Based on the information on the page, extract all the information from the schema in JSON format. Try to extract all the fields even those that might not be marked as required.\"),\n  prompt: z.string().optional()\n}).strict(strictMessage);\n\nexport type ExtractOptions = z.infer<typeof extractOptions>;\n\nexport const actionsSchema = z.array(z.union([\n  z.object({\n    type: z.literal(\"wait\"),\n    milliseconds: z.number().int().positive().finite().optional(),\n    selector: z.string().optional(),\n  }).refine(\n    (data) => (data.milliseconds !== undefined || data.selector !== undefined) && !(data.milliseconds !== undefined && data.selector !== undefined),\n    {\n      message: \"Either 'milliseconds' or 'selector' must be provided, but not both.\",\n    }\n  ),\n  z.object({\n    type: z.literal(\"click\"),\n    selector: z.string(),\n  }),\n  z.object({\n    type: z.literal(\"screenshot\"),\n    fullPage: z.boolean().default(false),\n  }),\n  z.object({\n    type: z.literal(\"write\"),\n    text: z.string(),\n  }),\n  z.object({\n    type: z.literal(\"press\"),\n    key: z.string(),\n  }),\n  z.object({\n    type: z.literal(\"scroll\"),\n    direction: z.enum([\"up\", \"down\"]).optional().default(\"down\"),\n    selector: z.string().optional(),\n  }),\n  z.object({\n    type: z.literal(\"scrape\"),\n  }),\n  z.object({\n    type: z.literal(\"executeJavascript\"),\n    script: z.string()\n  }),\n]));\n\nexport const scrapeOptions = z.object({\n  formats: z\n    .enum([\n      \"markdown\",\n      \"html\",\n      \"rawHtml\",\n      \"links\",\n      \"screenshot\",\n      \"screenshot@fullPage\",\n      \"extract\"\n    ])\n    .array()\n    .optional()\n    .default([\"markdown\"])\n    .refine(x => !(x.includes(\"screenshot\") && x.includes(\"screenshot@fullPage\")), \"You may only specify either screenshot or screenshot@fullPage\"),\n  headers: z.record(z.string(), z.string()).optional(),\n  includeTags: z.string().array().optional(),\n  excludeTags: z.string().array().optional(),\n  onlyMainContent: z.boolean().default(true),\n  timeout: z.number().int().positive().finite().safe().optional(),\n  waitFor: z.number().int().nonnegative().finite().safe().default(0),\n  extract: extractOptions.optional(),\n  mobile: z.boolean().default(false),\n  parsePDF: z.boolean().default(true),\n  actions: actionsSchema.optional(),\n  // New\n  location: z.object({\n    country: z.string().optional().refine(\n      (val) => !val || Object.keys(countries).includes(val.toUpperCase()),\n      {\n        message: \"Invalid country code. Please use a valid ISO 3166-1 alpha-2 country code.\",\n      }\n    ).transform(val => val ? val.toUpperCase() : 'US'),\n    languages: z.string().array().optional(),\n  }).optional(),\n  \n  // Deprecated\n  geolocation: z.object({\n    country: z.string().optional().refine(\n      (val) => !val || Object.keys(countries).includes(val.toUpperCase()),\n      {\n        message: \"Invalid country code. Please use a valid ISO 3166-1 alpha-2 country code.\",\n      }\n    ).transform(val => val ? val.toUpperCase() : 'US'),\n    languages: z.string().array().optional(),\n  }).optional(),\n  skipTlsVerification: z.boolean().default(false),\n  removeBase64Images: z.boolean().default(true),\n}).strict(strictMessage)\n\n\n\nexport type ScrapeOptions = z.infer<typeof scrapeOptions>;\n\nexport const extractV1Options = z.object({\n  urls: url.array(),\n  prompt: z.string().optional(),\n  schema: z.any().optional(),\n  limit: z.number().int().positive().finite().safe().optional(),\n  ignoreSitemap: z.boolean().default(false),\n  includeSubdomains: z.boolean().default(true),\n  allowExternalLinks: z.boolean().default(false),\n  origin: z.string().optional().default(\"api\"),\n  timeout: z.number().int().positive().finite().safe().default(60000)\n}).strict(strictMessage)\n\nexport type ExtractV1Options = z.infer<typeof extractV1Options>;\nexport const extractRequestSchema = extractV1Options;\nexport type ExtractRequest = z.infer<typeof extractRequestSchema>;\n\nexport const scrapeRequestSchema = scrapeOptions.omit({ timeout: true }).extend({\n  url,\n  origin: z.string().optional().default(\"api\"),\n  timeout: z.number().int().positive().finite().safe().default(30000),\n}).strict(strictMessage).refine(\n  (obj) => {\n    const hasExtractFormat = obj.formats?.includes(\"extract\");\n    const hasExtractOptions = obj.extract !== undefined;\n    return (hasExtractFormat && hasExtractOptions) || (!hasExtractFormat && !hasExtractOptions);\n  },\n  {\n    message: \"When 'extract' format is specified, 'extract' options must be provided, and vice versa\",\n  }\n).transform((obj) => {\n  if ((obj.formats?.includes(\"extract\") || obj.extract) && !obj.timeout) {\n    return { ...obj, timeout: 60000 };\n  }\n  return obj;\n});\n\n\n\nexport type ScrapeRequest = z.infer<typeof scrapeRequestSchema>;\nexport type ScrapeRequestInput = z.input<typeof scrapeRequestSchema>;\n\nexport const webhookSchema = z.preprocess(x => {\n  if (typeof x === \"string\") {\n    return { url: x };\n  } else {\n    return x;\n  }\n}, z.object({\n  url: z.string().url(),\n  headers: z.record(z.string(), z.string()).default({}),\n}).strict(strictMessage))\n\nexport const batchScrapeRequestSchema = scrapeOptions.extend({\n  urls: url.array(),\n  origin: z.string().optional().default(\"api\"),\n  webhook: webhookSchema.optional(),\n}).strict(strictMessage).refine(\n  (obj) => {\n    const hasExtractFormat = obj.formats?.includes(\"extract\");\n    const hasExtractOptions = obj.extract !== undefined;\n    return (hasExtractFormat && hasExtractOptions) || (!hasExtractFormat && !hasExtractOptions);\n  },\n  {\n    message: \"When 'extract' format is specified, 'extract' options must be provided, and vice versa\",\n  }\n);\n\nexport type BatchScrapeRequest = z.infer<typeof batchScrapeRequestSchema>;\n\nconst crawlerOptions = z.object({\n  includePaths: z.string().array().default([]),\n  excludePaths: z.string().array().default([]),\n  maxDepth: z.number().default(10), // default?\n  limit: z.number().default(10000), // default?\n  allowBackwardLinks: z.boolean().default(false), // >> TODO: CHANGE THIS NAME???\n  allowExternalLinks: z.boolean().default(false),\n  allowSubdomains: z.boolean().default(false),\n  ignoreRobotsTxt: z.boolean().default(false),\n  ignoreSitemap: z.boolean().default(true),\n  deduplicateSimilarURLs: z.boolean().default(true),\n  ignoreQueryParameters: z.boolean().default(false),\n}).strict(strictMessage);\n\n// export type CrawlerOptions = {\n//   includePaths?: string[];\n//   excludePaths?: string[];\n//   maxDepth?: number;\n//   limit?: number;\n//   allowBackwardLinks?: boolean; // >> TODO: CHANGE THIS NAME???\n//   allowExternalLinks?: boolean;\n//   ignoreSitemap?: boolean;\n// };\n\nexport type CrawlerOptions = z.infer<typeof crawlerOptions>;\n\nexport const crawlRequestSchema = crawlerOptions.extend({\n  url,\n  origin: z.string().optional().default(\"api\"),\n  scrapeOptions: scrapeOptions.default({}),\n  webhook: webhookSchema.optional(),\n  limit: z.number().default(10000),\n}).strict(strictMessage);\n\n// export type CrawlRequest = {\n//   url: string;\n//   crawlerOptions?: CrawlerOptions;\n//   scrapeOptions?: Exclude<ScrapeRequest, \"url\">;\n// };\n\n// export type ExtractorOptions = {\n//   mode: \"markdown\" | \"llm-extraction\" | \"llm-extraction-from-markdown\" | \"llm-extraction-from-raw-html\";\n//   extractionPrompt?: string;\n//   extractionSchema?: Record<string, any>;\n// }\n\n\nexport type CrawlRequest = z.infer<typeof crawlRequestSchema>;\n\nexport const mapRequestSchema = crawlerOptions.extend({\n  url,\n  origin: z.string().optional().default(\"api\"),\n  includeSubdomains: z.boolean().default(true),\n  search: z.string().optional(),\n  ignoreSitemap: z.boolean().default(false),\n  sitemapOnly: z.boolean().default(false),\n  limit: z.number().min(1).max(5000).default(5000),\n}).strict(strictMessage);\n\n// export type MapRequest = {\n//   url: string;\n//   crawlerOptions?: CrawlerOptions;\n// };\n\nexport type MapRequest = z.infer<typeof mapRequestSchema>;\n\nexport type Document = {\n  markdown?: string;\n  extract?: any;\n  html?: string;\n  rawHtml?: string;\n  links?: string[];\n  screenshot?: string;\n  actions?: {\n    screenshots?: string[];\n    scrapes?: ScrapeActionContent[];\n  };\n  warning?: string;\n  metadata: {\n    title?: string;\n    description?: string;\n    language?: string;\n    keywords?: string;\n    robots?: string;\n    ogTitle?: string;\n    ogDescription?: string;\n    ogUrl?: string;\n    ogImage?: string;\n    ogAudio?: string;\n    ogDeterminer?: string;\n    ogLocale?: string;\n    ogLocaleAlternate?: string[];\n    ogSiteName?: string;\n    ogVideo?: string;\n    dcTermsCreated?: string;\n    dcDateCreated?: string;\n    dcDate?: string;\n    dcTermsType?: string;\n    dcType?: string;\n    dcTermsAudience?: string;\n    dcTermsSubject?: string;\n    dcSubject?: string;\n    dcDescription?: string;\n    dcTermsKeywords?: string;\n    modifiedTime?: string;\n    publishedTime?: string;\n    articleTag?: string;\n    articleSection?: string;\n    url?: string;\n    sourceURL?: string;\n    statusCode?: number;\n    error?: string;\n    [key: string]: string | string[] | number | undefined;\n  };\n};\n\nexport type ErrorResponse = {\n  success: false;\n  error: string;\n  details?: any;\n};\n\nexport type ScrapeResponse =\n  | ErrorResponse\n  | {\n      success: true;\n      warning?: string;\n      data: Document;\n      scrape_id?: string;\n    };\n\nexport interface ScrapeResponseRequestTest {\n  statusCode: number;\n  body: ScrapeResponse;\n  error?: string;\n}\n\nexport type ExtractResponse =\n  | ErrorResponse\n  | {\n      success: true;\n      warning?: string;\n      data: z.infer<typeof extractRequestSchema>;\n      scrape_id?: string;\n    };\n\nexport interface ExtractResponseRequestTest {\n  statusCode: number;\n  body: ExtractResponse;\n  error?: string;\n}\n\nexport type CrawlResponse =\n  | ErrorResponse\n  | {\n      success: true;\n      id: string;\n      url: string;\n    };\n\nexport type MapResponse =\n  | ErrorResponse\n  | {\n      success: true;\n      links: string[];\n      scrape_id?: string;\n    };\n\nexport type CrawlStatusParams = {\n  jobId: string;\n};\n\nexport type ConcurrencyCheckParams = {\n  teamId: string;\n};\n\nexport type ConcurrencyCheckResponse =\n  | ErrorResponse\n  | {\n      success: true;\n      concurrency: number;\n    };\n\nexport type CrawlStatusResponse =\n  | ErrorResponse\n  | {\n      success: true;\n      status: \"scraping\" | \"completed\" | \"failed\" | \"cancelled\";\n      completed: number;\n      total: number;\n      creditsUsed: number;\n      expiresAt: string;\n      next?: string;\n      data: Document[];\n    };\n\ntype AuthObject = {\n  team_id: string;\n  plan: PlanType | undefined;\n};\n\ntype Account = {\n  remainingCredits: number;\n};\n\nexport type AuthCreditUsageChunk = {\n  api_key: string;\n  team_id: string;\n  sub_id: string | null;\n  sub_current_period_start: string | null;\n  sub_current_period_end: string | null;\n  price_id: string | null;\n  price_credits: number; // credit limit with assoicated price, or free_credits (500) if free plan\n  credits_used: number;\n  coupon_credits: number; // do not rely on this number to be up to date after calling a billTeam\n  coupons: any[];\n  adjusted_credits_used: number; // credits this period minus coupons used\n  remaining_credits: number;\n  sub_user_id: string | null;\n  total_credits_sum: number;\n};\n\nexport interface RequestWithMaybeACUC<\n  ReqParams = {},\n  ReqBody = undefined,\n  ResBody = undefined\n> extends Request<ReqParams, ReqBody, ResBody> {\n  acuc?: AuthCreditUsageChunk,\n}\n\nexport interface RequestWithACUC<\n  ReqParams = {},\n  ReqBody = undefined,\n  ResBody = undefined\n> extends Request<ReqParams, ReqBody, ResBody> {\n  acuc: AuthCreditUsageChunk,\n}\n\nexport interface RequestWithAuth<\n  ReqParams = {},\n  ReqBody = undefined,\n  ResBody = undefined,\n> extends Request<ReqParams, ReqBody, ResBody> {\n  auth: AuthObject;\n  account?: Account;\n}\n\nexport interface RequestWithMaybeAuth<\n  ReqParams = {},\n  ReqBody = undefined,\n  ResBody = undefined\n> extends RequestWithMaybeACUC<ReqParams, ReqBody, ResBody> {\n  auth?: AuthObject;\n  account?: Account;\n}\n\nexport interface RequestWithAuth<\n  ReqParams = {},\n  ReqBody = undefined,\n  ResBody = undefined,\n> extends RequestWithACUC<ReqParams, ReqBody, ResBody> {\n  auth: AuthObject;\n  account?: Account;\n}\n\nexport interface ResponseWithSentry<\n  ResBody = undefined,\n> extends Response<ResBody> {\n  sentry?: string,\n}\n\nexport function toLegacyCrawlerOptions(x: CrawlerOptions) {\n  return {\n    includes: x.includePaths,\n    excludes: x.excludePaths,\n    maxCrawledLinks: x.limit,\n    maxDepth: x.maxDepth,\n    limit: x.limit,\n    generateImgAltText: false,\n    allowBackwardCrawling: x.allowBackwardLinks,\n    allowExternalContentLinks: x.allowExternalLinks,\n    allowSubdomains: x.allowSubdomains,\n    ignoreRobotsTxt: x.ignoreRobotsTxt,\n    ignoreSitemap: x.ignoreSitemap,\n    deduplicateSimilarURLs: x.deduplicateSimilarURLs,\n    ignoreQueryParameters: x.ignoreQueryParameters,\n  };\n}\n\nexport function fromLegacyCrawlerOptions(x: any): { crawlOptions: CrawlerOptions; internalOptions: InternalOptions } {\n  return {\n    crawlOptions: crawlerOptions.parse({\n      includePaths: x.includes,\n      excludePaths: x.excludes,\n      limit: x.maxCrawledLinks ?? x.limit,\n      maxDepth: x.maxDepth,\n      allowBackwardLinks: x.allowBackwardCrawling,\n      allowExternalLinks: x.allowExternalContentLinks,\n      allowSubdomains: x.allowSubdomains,\n      ignoreRobotsTxt: x.ignoreRobotsTxt,\n      ignoreSitemap: x.ignoreSitemap,\n      deduplicateSimilarURLs: x.deduplicateSimilarURLs,\n      ignoreQueryParameters: x.ignoreQueryParameters,\n    }),\n    internalOptions: {\n      v0CrawlOnlyUrls: x.returnOnlyUrls,\n    },\n  };\n}\n\n\n\nexport interface MapDocument {\n  url: string;\n  title?: string;\n  description?: string;\n}   \nexport function fromLegacyScrapeOptions(pageOptions: PageOptions, extractorOptions: ExtractorOptions | undefined, timeout: number | undefined): { scrapeOptions: ScrapeOptions, internalOptions: InternalOptions } {\n  return {\n    scrapeOptions: scrapeOptions.parse({\n      formats: [\n        (pageOptions.includeMarkdown ?? true) ? \"markdown\" as const : null,\n        (pageOptions.includeHtml ?? false) ? \"html\" as const : null,\n        (pageOptions.includeRawHtml ?? false) ? \"rawHtml\" as const : null,\n        (pageOptions.screenshot ?? false) ? \"screenshot\" as const : null,\n        (pageOptions.fullPageScreenshot ?? false) ? \"screenshot@fullPage\" as const : null,\n        (extractorOptions !== undefined && extractorOptions.mode.includes(\"llm-extraction\")) ? \"extract\" as const : null,\n        \"links\"\n      ].filter(x => x !== null),\n      waitFor: pageOptions.waitFor,\n      headers: pageOptions.headers,\n      includeTags: (typeof pageOptions.onlyIncludeTags === \"string\" ? [pageOptions.onlyIncludeTags] : pageOptions.onlyIncludeTags),\n      excludeTags: (typeof pageOptions.removeTags === \"string\" ? [pageOptions.removeTags] : pageOptions.removeTags),\n      onlyMainContent: pageOptions.onlyMainContent ?? false,\n      timeout: timeout,\n      parsePDF: pageOptions.parsePDF,\n      actions: pageOptions.actions,\n      location: pageOptions.geolocation,\n      skipTlsVerification: pageOptions.skipTlsVerification,\n      removeBase64Images: pageOptions.removeBase64Images,\n      extract: extractorOptions !== undefined && extractorOptions.mode.includes(\"llm-extraction\") ? {\n        systemPrompt: extractorOptions.extractionPrompt,\n        prompt: extractorOptions.userPrompt,\n        schema: extractorOptions.extractionSchema,\n      } : undefined,\n      mobile: pageOptions.mobile,\n    }),\n    internalOptions: {\n      atsv: pageOptions.atsv,\n      v0DisableJsDom: pageOptions.disableJsDom,\n      v0UseFastMode: pageOptions.useFastMode,\n    },\n    // TODO: fallback, fetchPageContent, replaceAllPathsWithAbsolutePaths, includeLinks\n  }\n}\n\nexport function fromLegacyCombo(pageOptions: PageOptions, extractorOptions: ExtractorOptions | undefined, timeout: number | undefined, crawlerOptions: any): { scrapeOptions: ScrapeOptions, internalOptions: InternalOptions} {\n  const { scrapeOptions, internalOptions: i1 } = fromLegacyScrapeOptions(pageOptions, extractorOptions, timeout);\n  const { internalOptions: i2 } = fromLegacyCrawlerOptions(crawlerOptions);\n  return { scrapeOptions, internalOptions: Object.assign(i1, i2) };\n}\n\nexport function toLegacyDocument(document: Document, internalOptions: InternalOptions): V0Document | { url: string; } {\n  if (internalOptions.v0CrawlOnlyUrls) {\n    return { url: document.metadata.sourceURL! };\n  }\n\n  return {\n    content: document.markdown!,\n    markdown: document.markdown!,\n    html: document.html,\n    rawHtml: document.rawHtml,\n    linksOnPage: document.links,\n    llm_extraction: document.extract,\n    metadata: {\n      ...document.metadata,\n      error: undefined,\n      statusCode: undefined,\n      pageError: document.metadata.error,\n      pageStatusCode: document.metadata.statusCode,\n      screenshot: document.screenshot,\n    },\n    actions: document.actions ,\n    warning: document.warning,\n  }\n}\n"]}